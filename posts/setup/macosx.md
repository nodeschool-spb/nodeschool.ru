---
title: Установить Node.js на macOS
description: Актуально на ноябрь 2020 года
date: 2020-11-20
tags:
  - post
  - setup
  - macos
draft: false

layout: layouts/post.njk
author:
  name: Тим Маринин
  url: https://marinintim.com
  pronouns: he/him
---

<div class="warning">
  <p>Эта статья предназначена для новичков, и если вам что-то непонятно, то это баг, который нужно исправить! Напишите <a href="/about">нам</a></p>
</div>

Сама по себе установка Node.js несложная, но есть несколько нюансов, которые стоит учесть,
чтобы было удобнее.

Начнём с того, что на машине, предназначенной для разработки, часто бывает полезно
держать _несколько_ версий Node.js — например, один проект требует старой версии
Node.js, а в другом уже можно использовать более современную, или если захочется проверить,
можно ли работает ли проект на новой версии.

Поэтому рекомендуемый способ: устанавливать Node.js при помощи отдельного
инструмента, позволяющего переключаться между версиями, — [nvm][nvm] (расшифровывается как *node version manager*).

Чтобы его установить, нужно открыть терминал (мы рекомендуем [iTerm2][iterm2], но обычный Terminal.app тоже подойдёт). Для начала проверим, что установлен git:

<pre>
  <code class="code__cmd">$ git --version</code>
  <code>git version 2.24.3 (Apple Git-128)</code>
</pre>

<details>
    <summary>Что это значит?</summary>
    <p>На сайте Нодскула часто публикуются куски кода и команды, которые нужно выполнить в терминале.</p>
    <p>Команды помечены как <code>$ command-name</code>, но знак доллара вводить не нужно — он помогает различить, где команды, которые нужно ввести, а где — результат. В этом примере <code>git version 2.24.3 (Apple Git-128)</code> — это вывод команды <code>git --version</code>.</p>
</details>

Возможно, что появится диалог, предлагающий установить XCode Developer Tools — надо согласиться.

<div class="warning">
  <p>Внутри терминала автоматически запускается шелл (его ещё называют «оболочка») — программа, которая интерпретирует команды, которые вы вводите.</p>

  <details>
    <summary>Почему терминал и шелл это не одно и то же?</summary>
    <p>Сегодня мы работаем с компьютерами напрямую, но раньше компьютеры находились далеко от своих пользователей, и те использовали отдельные устройства — терминалы — для того, чтобы работать с ним. Терминалы, по сути, представляли из себя клавиатуру, монитор, и способ подключиться к компьютеру, но они не были компьютерами сами по себе.</p>
    <p>Шелл же запускается <em>на компьютере</em> и может запускать другие программы, но не умеет рисовать текст или взаимодействовать с клавиатурой — это обязанности терминала.</p>
    <p>Более правильная терминология для iTerm2 или Terminal.app — <em>эмуляторы терминала</em>, потому что они эмулируют настоящие устройства, чтобы шелл и прочие программы могли и дальше делать вид, что мы живём в семидесятых.</p>
    <p>Одним из популярных настоящих терминалов был <a href="https://ru.wikipedia.org/wiki/VT100">VT100</a>.</p>
  </details>

  <p>Разные шеллы используют разные файлы для конфигурации. Apple поменяли шелл по умолчанию с bash на zsh в Catalina, и если вы не меняли шелл, то скорее всего у вас zsh — и файл конфигурации называется <code>.zshrc</code></p>
</div>

После этого установим nvm:

<p>
<pre><code>$ curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.0/install.sh | bash</code></pre></p>

<details>
  <summary>Что делает эта команда?</summary>
  <p>Разберём по частям: <code>curl -o- <em>URL</em></code> запрашивает этот URL и выводит результат в стандартный вывод. Например, если вы попробуете выполнить <code>curl -o- https://nodeschool.ru/posts/setup/macosx/</code>, то увидите HTML-разметку этой статьи.
  </p>
  <p>Символ <code>|</code> (его называют «пайп») даёт понять шеллу, что вы хотите перенаправить стандартный вывод первой команды в стандартный ввод следующей команды.</p>
  <p><code>bash</code> выполняет скрипт, пришедший в стандартный ввод.</p>
  <p>Таким образом, <code>curl</code> cкачивает скрипт, а <code>bash</code> его выполняет.</p>
  <p>Если выполнить только первую часть (<code>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.0/install.sh</code>), то можно будет прочитать этот скрипт, чтобы понять, что он делает.</p>
</details>

После установки nvm нужно перезапустить шелл — проще всего перезапустить терминал целиком.

И теперь у нас есть возможность установить Node.js с помощью nvm. <code>--lts</code> означает, что нас интересуют LTS-версии, которые дольше поддерживаются:

<pre>
  <code>$ nvm install --lts</code>
</pre>

Проверим, что всё установилось:

<pre>
  <code>$ node -e 'console.log(2 + 2)'</code>
  <code>4</code>
  <code>$ node -v</code>
  <code>v14.15.1</code>
</pre>

Так как nvm устанавливает Node.js в <code>\~/.nvm/versions</code>, то вы можете устанавливать модули из npm без использования <code>sudo</code>, например:

<pre>
  <code>npm install -g lighthouse</code>
</pre>

На этом всё!

<div class="warning">
  <p>Если что-то пошло не так — напишите нам или приходите в <a href="https://t.me/nodeschoolspb_group">чат Нодскула</a>, постараемся помочь.</p>
</div>

[nvm]: https://github.com/nvm-sh/nvm
[iterm2]: https://iterm2.com
[about]: /about
